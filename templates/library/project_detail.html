{% extends "base.html" %}
{% load i18n static %}
{% block title %}{{ collection.name }} - Project Page{% endblock %}
{% block scripts %}
<script src="{% static "sandbox/js/lib/utils.js" %}"></script>
<script src="{% static "sandbox/js/lib/api.js" %}"></script>
{% endblock %}
{% block header %}
{% endblock header %}
{% block content %}
<div class="container">
  <section class="project">
    <header>
      <div class="row">
        <div class="col-md-12">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a href="{% url 'library:collection-list' %}">
                <span class="glyphicon glyphicon-home"></span> {% trans "Home"%}
              </a>
            </li>
            <li class="breadcrumb-item">
              <a href="{% url 'library:project-detail' slug %}">{{ collection.name }} ({{ collection.id }})</a>
            </li>
          </ol>
        </div>
      </div>
    </header>
    <main>
      <div class="row">
        <div class="col-md-12">
          <div class="collection">
            <a href="{% url 'library:project-detail' slug %}">
              <h1>
                {% if collection.title %}
                {{ collection.title }}
                {% else %}
                {{ collection.name }}
                {% endif %}
                ({{ collection.id }})
              </h1>
            </a>
            {% comment %}
            <h2>
              Documents ({{ collection.num_docs }})
            </h2>
            {% endcomment %}
            <p>
              {% include 'library/includes/progress.html' with items=collection.progress %}
            </p>
          </div>
        </div>        
      </div>
      <div class="row">
        <div class="col-md-12">
          <form action="{% url 'library:project-detail' slug %}">
            <label for="doc-id">
              {% trans "Document" %}:
            </label>
            <select id="doc-id" name="docId" onchange="this.form.submit();">
              <option {% if selected_document_id == None %} selected{% endif %}>Select a document ...</option>
              {% for doc in documents %}
              <option value="{{ doc.id }}"{% if selected_document_id == doc.id %} selected{% endif %}>
                {{ doc.title }} ({{ doc.id }})
              </option>
              {% endfor %}
            </select>
          </form>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          {% if not selected_document %}
          <h4>{% trans "No document selected" %}</h4>
          {% else %}
          {% with document=selected_document %}
          <a href="{% url 'library:project-detail' slug %}/?docId={{ document.id }}">
            <h2>{{ document.title }} ({{ document.id }})</h2>
          </a>
          <h3>Pages ({{ document.num_pages }})</h3>
          <p>
            {% include 'library/includes/progress.html' with items=document.progress %}
          </p>
          <div class="page-list">
            {% for page in document.pages %}
            {% include 'library/includes/page_list_item.html' %}
            {% endfor %}
          </div>
          {% endwith %}
          {% endif %}
        </div>
      </div>
    </main>
  </section>
</div>
{% endblock content %}
{% block footer %}
{% endblock footer %}
